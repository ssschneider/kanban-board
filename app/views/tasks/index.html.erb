<section class="bg-slate-900 p-8 flex flex-col gap-4 rounded h-full">
  <div class="container flex justify-between items-center">
    <h2>You have <%= @tasks_count %> tasks </h2>

    <%= link_to new_task_path, 
        class: "bg-white text-slate-950 font-medium px-4 py-2 rounded hover:cursor-pointer flex justify-center items-center gap-2 hover:cursor-pointer hover:opacity-75" do %>
      <%= image_tag 'icons/plus.svg', alt: 'Plus icon', class: 'size-6 text-slate-950' %>
      New Task
    <% end %>
  </div>

  <div class="flex gap-2 rounded bg-slate-800 container justify-between items-start h-full">
    <%# KANBAN COLUMN %>
    <div class="container flex flex-col gap-2 bg-slate-700 p-4 justify-center h-full rounded-l">
      <h3 class="text-center text-2xl font-medium">Pending</h3>

      <ul class="list-none flex-1 flex flex-col overflow-y-auto">
        <% @pending.each do |task| %>
          <li class="bg-slate-700 border-b border-b-slate-400 last:border-b-transparent py-2 flex flex-col">
              <h2 class="text-lg"><%= task.title %></h2>
              <p class="text-slate-400 text-sm"><%= task.description %></p>
              <nav class="container flex justify-between items-center pt-3">
                <%= button_to update_status_task_path(task.id, status: 'in-progress'), method: :patch, remote: true, 
                  class: "bg-white text-slate-950 font-medium px-4 py-2 rounded hover:cursor-pointer flex items-center gap-2 h-full" do %>
                      Start Task
                      <%= image_tag 'icons/chevron-right.svg', alt: 'Arrow icon', class: 'size-6 text-slate-950' %>
                <% end %>

                <div class="flex-1 flex justify-end items-end gap-4">
                  <%= button_to edit_task_path(task.id), method: :patch, remote: true, 
                    class: "flex items-center justify-center p-3 rounded border border-white hover:cursor-pointer" do %>
                      <%= image_tag 'icons/pencil.svg', alt: 'Pencil icon', class: 'size-6 text-white' %>
                  <% end %>
                  <%= button_to tasks_path(task.id, status: 'in-progress'), method: :delete, remote: true, 
                    class: "flex items-center justify-center p-3 rounded border border-white  hover:cursor-pointer" do %>
                      <%= image_tag 'icons/trash.svg', alt: 'Arrow icon', class: 'size-6 text-white' %>
                  <% end %>
                </div>
            </nav>
          </li>
        <% end %>
      </ul>
    </div>

    <%# KANBAN COLUMN %>
    <div class="container flex flex-col gap-2 bg-slate-700 p-4 justify-center h-full">
      <h3 class="text-center text-2xl font-medium">In Progress</h3>

      <ul class="list-none flex-1 flex flex-col overflow-y-auto">
        <% @in_progress.each do |task| %>
          <li class="bg-slate-700 border-b border-b-slate-400 last:border-b-transparent py-2 flex flex-col">
              <h2 class="text-lg"><%= task.title %></h2>
              <p class="text-slate-400 text-sm"><%= task.description %></p>
              <nav class="container flex justify-between items-center pt-3">
                <%= button_to update_status_task_path(task.id, status: 'completed'), method: :patch, remote: true, 
                  class: "bg-white text-slate-950 font-medium px-4 py-2 rounded hover:cursor-pointer flex items-center gap-2 h-full" do %>
                      Complete Task
                      <%= image_tag 'icons/chevron-right.svg', alt: 'Arrow icon', class: 'size-6 text-slate-950' %>
                <% end %>

                <div class="flex-1 flex justify-end items-end gap-4">
                  <%= button_to edit_task_path(task.id), method: :patch, remote: true, 
                    class: "flex items-center justify-center p-3 rounded border border-white hover:cursor-pointer" do %>
                      <%= image_tag 'icons/pencil.svg', alt: 'Pencil icon', class: 'size-6 text-white' %>
                  <% end %>
                  <%= button_to task_path(task), method: :delete, remote: true, class: "flex items-center justify-center p-3 rounded border border-white hover:cursor-pointer" do %>
                    <%= image_tag 'icons/trash.svg', alt: 'Delete icon', class: 'size-6 text-white' %>
                  <% end %>



                </div>
            </nav>
          </li>
        <% end %>
      </ul>
    </div>

    <%# KANBAN COLUMN %>
    <div class="container flex flex-col gap-2 bg-slate-700 p-4 justify-center h-full rounded-r">
      <h3 class="text-center text-2xl font-medium">Completed</h3>

      <ul class="list-none flex-1 flex flex-col overflow-y-auto">
        <% @completed.each do |task| %>
          <li class="bg-slate-700 border-b border-b-slate-400 py-2">
              <h2><%= task.title %></h2>
              <p><%= task.description %></p>
              <nav class="container flex justify-between items-center pt-3">
                <div class="flex-1 flex justify-end items-end gap-4">
                  <%= button_to tasks_path(task.id, status: 'in-progress'), method: :delete, remote: true, 
                    class: "flex items-center justify-center p-3 rounded border border-white  hover:cursor-pointer" do %>
                      <%= image_tag 'icons/trash.svg', alt: 'Arrow icon', class: 'size-6 text-white' %>
                  <% end %>
                </div>
            </nav>
          </li>
        <% end %>
      </ul>
    </div>
  </div>

</section>